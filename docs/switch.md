目的  
スマホアプリでは成人コンテンツを非表示にし、Webでは表示できるようにする。  
AppleやGoogleの審査に通すため、アプリから成人データへアクセスできない構造を作る。

背景  
同じバックエンドとデータベースを共有しつつ、フロントだけ挙動を変える。  
UA判定やフロント側のif分岐では偽装可能なため、サーバー側で制御する必要がある。

何をするのか  
プラットフォーム別にアクセス権を分け、アプリからのリクエストでは成人データを返さない。  
Webからのリクエストのみ成人データを取得できるようにする。

どう実現するのか  
1. APIが発行するJWTに `plat` クレーム（app / web）を付与する。  
2. SupabaseのRLS（行レベルセキュリティ）で、`plat='app'` の場合は `is_adult=false` の行だけ取得可能にする。  
3. APIキーをプラットフォーム別に分ける。アプリにはapp用キー、Webにはweb用キーを埋め込む。  
4. API側でも `plat` クレームを検証し、appからの成人系エンドポイントを拒否する。  
5. フロント側のビルド設定でEXPO_PLATFORMを渡し、UI上でも成人要素を非表示にする。  

結果  
バックエンドは共通のまま、スマホでは成人データを取得できず、Webでは成人データも表示可能になる。

# æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ†é›¢ã«ã‚ˆã‚‹æˆäººå‘ã‘ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å¯¾å¿œå®Ÿè£…è¨ˆç”»

## ğŸ“‹ æ¦‚è¦

**ä½œæˆæ—¥**: 2025-10-24
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Ÿè£…å‰
**å„ªå…ˆåº¦**: é«˜

### ç›®çš„
Stripeãƒãƒªã‚·ãƒ¼ã«æº–æ‹ ã—ãªãŒã‚‰ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åç›ŠåŒ–ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã€æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—ã”ã¨ã«åˆ†é›¢ã™ã‚‹ã€‚

## ğŸ¯ èƒŒæ™¯ã¨å•é¡Œç‚¹

### Stripeãƒãƒªã‚·ãƒ¼ã®åˆ¶é™
- Stripeã¯ã€Œãƒãƒ«ãƒã‚°ãƒ©ãƒ•ã‚£ãŠã‚ˆã³æ€§çš„æº€è¶³ã‚’ç›®çš„ã¨ã—ãŸæˆäººå‘ã‘ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è²©å£²ã€ã‚’ç¦æ­¢
- æ˜ç¤ºçš„ãªæ€§è¡Œç‚ºã‚„è£¸ä½“ã‚’æå†™ã™ã‚‹æ€§çš„ã«éœ²éª¨ãªç´ æã®è²©å£²ã‚‚ç¦æ­¢
- é•åã™ã‚‹ã¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåœæ­¢ã®ãƒªã‚¹ã‚¯

### ç¾åœ¨ã®å®Ÿè£…ã®å•é¡Œ
1. ã‚µãƒ–ã‚¹ã‚¯ãƒ—ãƒ©ãƒ³ã§ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒå«ã¾ã‚Œã‚‹å¯èƒ½æ€§
2. ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®æŠ•ã’éŠ­ã‚‚Stripeã§å‡¦ç†ã•ã‚Œã‚‹æã‚Œ
3. æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—ã®ç´ä»˜ã‘ãŒæ˜ç¢ºã§ãªã„

## âœ¨ ç›®æ¨™ä»•æ§˜

### æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®å®Œå…¨åˆ†é›¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stripeæ±ºæ¸ˆ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ ãƒ•ãƒªãƒ¼ãƒ—ãƒ©ãƒ³ï¼ˆç„¡æ–™ï¼‰                  â”‚
â”‚ âœ“ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ï¼ˆéã‚¢ãƒ€ãƒ«ãƒˆã®ã¿ï¼‰    â”‚
â”‚ âœ“ éã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®æŠ•ã’éŠ­       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆäººå‘ã‘å°‚é–€æ±ºæ¸ˆï¼ˆCCBill/Epochç­‰ï¼‰       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ“ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ +ãƒ—ãƒ©ãƒ³ï¼ˆã‚¢ãƒ€ãƒ«ãƒˆå«ã‚€ï¼‰     â”‚
â”‚ âœ“ ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®æŠ•ã’éŠ­         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³æ§‹æˆ

| ãƒ—ãƒ©ãƒ³ | æœˆé¡ | Netflixè¦–è´ | åºƒå‘Š | ã‚¢ãƒ€ãƒ«ãƒˆè¦–è´ | æ±ºæ¸ˆ |
|--------|------|------------|------|--------------|------|
| ãƒ•ãƒªãƒ¼ | Â¥0 | âœ— | âœ“ | âœ— | - |
| ãƒ—ãƒ¬ãƒŸã‚¢ãƒ  | Â¥980 | âœ“ | âœ— | âœ— | Stripe |
| ãƒ—ãƒ¬ãƒŸã‚¢ãƒ + | Â¥1,980 | âœ“ | âœ— | âœ“ | CCBill |

## ğŸ”§ å®Ÿè£…è¨ˆç”»

### Phase 1: å‹å®šç¾©ã®æ‹¡å¼µ

#### 1.1 SubscriptionPlanå‹ã®æ‹¡å¼µ
**ãƒ•ã‚¡ã‚¤ãƒ«**: `types/index.ts`
**è¡Œæ•°**: 77-88

**ç¾åœ¨ã®å®šç¾©**:
```typescript
export interface SubscriptionPlan {
  id: string;
  name: string;
  price: number;
  features: string[];
  is_current: boolean;
  billing_cycle: 'monthly' | 'yearly';
  next_billing_date?: string;
  has_netflix_access: boolean;
  has_ads: boolean;
}
```

**å¤‰æ›´å¾Œ**:
```typescript
export interface SubscriptionPlan {
  id: string;
  name: string;
  price: number;
  features: string[];
  is_current: boolean;
  billing_cycle: 'monthly' | 'yearly';
  next_billing_date?: string;
  has_netflix_access: boolean;
  has_ads: boolean;

  // ğŸ†• è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  has_adult_access: boolean;  // ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹å¯å¦
  payment_provider: 'stripe' | 'ccbill' | 'epoch' | null;  // æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
}
```

#### 1.2 æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼é–¢é€£ã®å‹å®šç¾©è¿½åŠ 
**ãƒ•ã‚¡ã‚¤ãƒ«**: `types/index.ts`
**è¿½åŠ ä½ç½®**: SubscriptionPlanã®å¾Œ

```typescript
// æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
export type PaymentProvider = 'stripe' | 'ccbill' | 'epoch';

// æŠ•ã’éŠ­ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
export interface TipRequest {
  content_id: string;
  content_type: 'video' | 'short' | 'live';
  amount: number;
  message?: string;
  payment_provider: PaymentProvider;  // è‡ªå‹•é¸æŠã•ã‚Œã‚‹
}

// æŠ•ã’éŠ­å±¥æ­´
export interface TipHistory {
  id: string;
  content_id: string;
  content_title: string;
  content_thumbnail: string;
  creator_name: string;
  amount: number;
  message?: string;
  payment_provider: PaymentProvider;
  created_at: string;
  status: 'completed' | 'pending' | 'failed';
}
```

### Phase 2: ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°

#### 2.1 ã‚µãƒ–ã‚¹ã‚¯ãƒ—ãƒ©ãƒ³ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ
**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«**: `mock/subscription-plans.json`

```json
[
  {
    "id": "plan_free",
    "name": "ãƒ•ãƒªãƒ¼ãƒ—ãƒ©ãƒ³",
    "price": 0,
    "features": [
      "åŸºæœ¬çš„ãªå‹•ç”»è¦–è´",
      "åºƒå‘Šã‚ã‚Š",
      "æ¨™æº–ç”»è³ª"
    ],
    "is_current": true,
    "billing_cycle": "monthly",
    "has_netflix_access": false,
    "has_ads": true,
    "has_adult_access": false,
    "payment_provider": null
  },
  {
    "id": "plan_premium",
    "name": "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³",
    "price": 980,
    "features": [
      "Netflixå‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¦–è´",
      "åºƒå‘Šãªã—",
      "é«˜ç”»è³ªé…ä¿¡",
      "ã‚ªãƒ•ãƒ©ã‚¤ãƒ³è¦–è´",
      "è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹åŒæ™‚è¦–è´"
    ],
    "is_current": false,
    "billing_cycle": "monthly",
    "has_netflix_access": true,
    "has_ads": false,
    "has_adult_access": false,
    "payment_provider": "stripe"
  },
  {
    "id": "plan_premium_plus",
    "name": "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ +ãƒ—ãƒ©ãƒ³",
    "price": 1980,
    "features": [
      "Netflixå‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¦–è´",
      "åºƒå‘Šãªã—",
      "é«˜ç”»è³ªé…ä¿¡",
      "ã‚ªãƒ•ãƒ©ã‚¤ãƒ³è¦–è´",
      "è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹åŒæ™‚è¦–è´",
      "å…¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆ18+å«ã‚€ï¼‰"
    ],
    "is_current": false,
    "billing_cycle": "monthly",
    "has_netflix_access": true,
    "has_ads": false,
    "has_adult_access": true,
    "payment_provider": "ccbill"
  }
]
```

#### 2.2 æ—¢å­˜ã®ã‚µãƒ–ã‚¹ã‚¯ãƒ—ãƒ©ãƒ³ãƒ¢ãƒƒã‚¯æ›´æ–°
**ãƒ•ã‚¡ã‚¤ãƒ«**: `mock/subscription-plans.json`ï¼ˆæ—¢å­˜ã®å ´åˆï¼‰
ã¾ãŸã¯ settings.tsxã®ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿æ›´æ–°

### Phase 3: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®è¿½åŠ 

#### 3.1 æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼é¸æŠãƒ­ã‚¸ãƒƒã‚¯
**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«**: `utils/paymentProvider.ts`

```typescript
import { PaymentProvider } from '../types';

/**
 * ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚¢ãƒ€ãƒ«ãƒˆãƒ•ãƒ©ã‚°ã«åŸºã¥ã„ã¦é©åˆ‡ãªæ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’é¸æŠ
 */
export function selectPaymentProvider(isAdultContent: boolean): PaymentProvider {
  if (isAdultContent) {
    // ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯æˆäººå‘ã‘å°‚é–€æ±ºæ¸ˆ
    return 'ccbill';  // ã¾ãŸã¯ 'epoch'
  } else {
    // éã‚¢ãƒ€ãƒ«ãƒˆã¯Stripe
    return 'stripe';
  }
}

/**
 * ãƒ—ãƒ©ãƒ³ã®æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«åŸºã¥ã„ã¦æ±ºæ¸ˆURLã‚’å–å¾—
 */
export function getPaymentUrl(
  provider: PaymentProvider,
  planId: string,
  amount: number
): string {
  switch (provider) {
    case 'stripe':
      return `/api/payment/stripe/checkout?plan=${planId}`;
    case 'ccbill':
      return `/api/payment/ccbill/checkout?plan=${planId}`;
    case 'epoch':
      return `/api/payment/epoch/checkout?plan=${planId}`;
    default:
      throw new Error(`Unknown payment provider: ${provider}`);
  }
}

/**
 * æŠ•ã’éŠ­ã®æ±ºæ¸ˆå‡¦ç†
 */
export async function processTip(
  contentId: string,
  contentType: 'video' | 'short' | 'live',
  isAdultContent: boolean,
  amount: number,
  message?: string
): Promise<{ success: boolean; paymentUrl: string }> {
  const provider = selectPaymentProvider(isAdultContent);

  // å®Ÿéš›ã®å®Ÿè£…ã§ã¯APIã‚³ãƒ¼ãƒ«ã‚’è¡Œã†
  const paymentUrl = `/api/payment/${provider}/tip?content=${contentId}&amount=${amount}`;

  return {
    success: true,
    paymentUrl,
  };
}
```

#### 3.2 ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãƒ­ã‚¸ãƒƒã‚¯
**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«**: `utils/contentAccess.ts`

```typescript
import { Video, Short, NetflixContent, SubscriptionPlan } from '../types';
import { canShowAdultContent } from '../constants/Platform';

/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³ã«åŸºã¥ã„ã¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’ãƒã‚§ãƒƒã‚¯
 */
export function canAccessContent(
  content: Video | Short | NetflixContent,
  currentPlan: SubscriptionPlan
): { canAccess: boolean; reason?: string } {
  // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¶é™ï¼ˆiOS/Androidï¼‰
  if (content.is_adult && !canShowAdultContent) {
    return {
      canAccess: false,
      reason: 'ã“ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã¯ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“',
    };
  }

  // ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ãƒã‚§ãƒƒã‚¯
  if (content.is_adult && !currentPlan.has_adult_access) {
    return {
      canAccess: false,
      reason: 'ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¦–è´ã™ã‚‹ã«ã¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ +ãƒ—ãƒ©ãƒ³ãŒå¿…è¦ã§ã™',
    };
  }

  // Netflixå‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ãƒã‚§ãƒƒã‚¯
  if ('type' in content && !currentPlan.has_netflix_access) {
    return {
      canAccess: false,
      reason: 'Netflixå‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¦–è´ã™ã‚‹ã«ã¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ä»¥ä¸ŠãŒå¿…è¦ã§ã™',
    };
  }

  return { canAccess: true };
}

/**
 * ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒªã‚¹ãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
 */
export function filterContentByPlan<T extends { is_adult: boolean }>(
  contents: T[],
  currentPlan: SubscriptionPlan
): T[] {
  return contents.filter(content => {
    // éã‚¢ãƒ€ãƒ«ãƒˆã¯å¸¸ã«è¡¨ç¤º
    if (!content.is_adult) {
      return true;
    }

    // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¶é™
    if (!canShowAdultContent) {
      return false;
    }

    // ãƒ—ãƒ©ãƒ³ã«ã‚ˆã‚‹ã‚¢ã‚¯ã‚»ã‚¹æ¨©
    return currentPlan.has_adult_access;
  });
}
```

### Phase 4: APIé–¢æ•°ã®å®Ÿè£…

#### 4.1 ã‚µãƒ–ã‚¹ã‚¯ãƒ—ãƒ©ãƒ³é–¢é€£API
**ãƒ•ã‚¡ã‚¤ãƒ«**: `utils/mockApi.ts`
**è¿½åŠ ã™ã‚‹é–¢æ•°**:

```typescript
/**
 * åˆ©ç”¨å¯èƒ½ãªã‚µãƒ–ã‚¹ã‚¯ãƒ—ãƒ©ãƒ³ã®ä¸€è¦§ã‚’å–å¾—
 */
export async function getAvailableSubscriptionPlans(): Promise<SubscriptionPlan[]> {
  // ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰èª­ã¿è¾¼ã¿
  const plans = require('../mock/subscription-plans.json');
  return new Promise(resolve => {
    setTimeout(() => resolve(plans), 300);
  });
}

/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³ã‚’å–å¾—
 */
export async function getCurrentSubscriptionPlan(): Promise<SubscriptionPlan> {
  const plans = await getAvailableSubscriptionPlans();
  // ç¾åœ¨ã¯ãƒ•ãƒªãƒ¼ãƒ—ãƒ©ãƒ³ã‚’è¿”ã™ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
  return plans.find(p => p.id === 'plan_free') || plans[0];
}

/**
 * ã‚µãƒ–ã‚¹ã‚¯ãƒ—ãƒ©ãƒ³ã®å¤‰æ›´
 */
export async function changeSubscriptionPlan(
  planId: string
): Promise<{ success: boolean; paymentUrl?: string; error?: string }> {
  const plans = await getAvailableSubscriptionPlans();
  const plan = plans.find(p => p.id === planId);

  if (!plan) {
    return { success: false, error: 'ãƒ—ãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“' };
  }

  if (plan.price === 0) {
    // ãƒ•ãƒªãƒ¼ãƒ—ãƒ©ãƒ³ã¸ã®å¤‰æ›´ã¯å³åº§ã«å®Œäº†
    return { success: true };
  }

  // æœ‰æ–™ãƒ—ãƒ©ãƒ³ã®å ´åˆã¯æ±ºæ¸ˆURLã‚’è¿”ã™
  const paymentUrl = getPaymentUrl(
    plan.payment_provider!,
    planId,
    plan.price
  );

  return { success: true, paymentUrl };
}
```

#### 4.2 æŠ•ã’éŠ­é–¢é€£API
**ãƒ•ã‚¡ã‚¤ãƒ«**: `utils/mockApi.ts`
**è¿½åŠ ã™ã‚‹é–¢æ•°**:

```typescript
/**
 * æŠ•ã’éŠ­ã‚’é€ã‚‹
 */
export async function sendTip(
  contentId: string,
  contentType: 'video' | 'short' | 'live',
  amount: number,
  message?: string
): Promise<{ success: boolean; paymentUrl?: string; error?: string }> {
  // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æƒ…å ±ã‚’å–å¾—ã—ã¦ã‚¢ãƒ€ãƒ«ãƒˆãƒ•ãƒ©ã‚°ã‚’ç¢ºèª
  let isAdult = false;

  if (contentType === 'video') {
    const video = await getVideoDetail(contentId);
    isAdult = video.is_adult;
  } else if (contentType === 'short') {
    const shorts = await getShorts();
    const short = shorts.find(s => s.id === contentId);
    isAdult = short?.is_adult || false;
  }

  // æ±ºæ¸ˆå‡¦ç†
  const result = await processTip(contentId, contentType, isAdult, amount, message);

  return result;
}

/**
 * æŠ•ã’éŠ­å±¥æ­´ã‚’å–å¾—
 */
export async function getTipHistory(): Promise<TipHistory[]> {
  // ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿
  return new Promise(resolve => {
    setTimeout(() => resolve([
      {
        id: 'tip_1',
        content_id: 'video_1',
        content_title: 'Sample Video',
        content_thumbnail: 'https://picsum.photos/400/225',
        creator_name: 'Creator Name',
        amount: 500,
        message: 'Great content!',
        payment_provider: 'stripe',
        created_at: new Date().toISOString(),
        status: 'completed',
      },
    ]), 300);
  });
}
```

### Phase 5: UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…

#### 5.1 ãƒ—ãƒ©ãƒ³é¸æŠç”»é¢ã®æ”¹ä¿®
**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/(tabs)/settings.tsx`
**å¤‰æ›´ç®‡æ‰€**: ãƒ—ãƒ©ãƒ³ç®¡ç†ã‚¿ãƒ–

**ä¸»ãªå¤‰æ›´ç‚¹**:
1. 3ã¤ã®ãƒ—ãƒ©ãƒ³ã‚’è¡¨ç¤ºï¼ˆãƒ•ãƒªãƒ¼ã€ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã€ãƒ—ãƒ¬ãƒŸã‚¢ãƒ +ï¼‰
2. å„ãƒ—ãƒ©ãƒ³ã®æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’è¡¨ç¤º
3. ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¢ã‚¯ã‚»ã‚¹ã®æœ‰ç„¡ã‚’æ˜ç¤º
4. ãƒ—ãƒ©ãƒ³å¤‰æ›´æ™‚ã«é©åˆ‡ãªæ±ºæ¸ˆãƒ•ãƒ­ãƒ¼ã¸èª˜å°

**å®Ÿè£…ã‚¤ãƒ¡ãƒ¼ã‚¸**:
```typescript
// ãƒ—ãƒ©ãƒ³è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
function PlanCard({ plan, currentPlan, onSelect }: {
  plan: SubscriptionPlan;
  currentPlan: SubscriptionPlan;
  onSelect: (plan: SubscriptionPlan) => void;
}) {
  const isCurrent = plan.id === currentPlan.id;

  return (
    <View style={[styles.planCard, isCurrent && styles.planCardCurrent]}>
      {isCurrent && (
        <View style={styles.currentBadge}>
          <Text style={styles.currentBadgeText}>ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³</Text>
        </View>
      )}

      <Text style={styles.planName}>{plan.name}</Text>
      <Text style={styles.planPrice}>
        {plan.price === 0 ? 'ç„¡æ–™' : `Â¥${plan.price.toLocaleString()}/æœˆ`}
      </Text>

      {/* æ©Ÿèƒ½ãƒªã‚¹ãƒˆ */}
      <View style={styles.featureList}>
        {plan.features.map((feature, index) => (
          <View key={index} style={styles.featureItem}>
            <Ionicons name="checkmark-circle" size={16} color={Colors.primary} />
            <Text style={styles.featureText}>{feature}</Text>
          </View>
        ))}
      </View>

      {/* æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¡¨ç¤º */}
      {plan.payment_provider && (
        <View style={styles.providerInfo}>
          <Ionicons name="card-outline" size={16} color={Colors.textSecondary} />
          <Text style={styles.providerText}>
            æ±ºæ¸ˆ: {plan.payment_provider.toUpperCase()}
          </Text>
        </View>
      )}

      {/* ãƒ—ãƒ©ãƒ³å¤‰æ›´ãƒœã‚¿ãƒ³ */}
      {!isCurrent && (
        <TouchableOpacity
          style={styles.selectButton}
          onPress={() => onSelect(plan)}
        >
          <Text style={styles.selectButtonText}>
            {plan.price === 0 ? 'ã“ã®ãƒ—ãƒ©ãƒ³ã«å¤‰æ›´' : 'ã“ã®ãƒ—ãƒ©ãƒ³ã«ç™»éŒ²'}
          </Text>
        </TouchableOpacity>
      )}
    </View>
  );
}
```

#### 5.2 æŠ•ã’éŠ­UIã®æ”¹ä¿®
**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«**: `components/TipModal.tsx`

æŠ•ã’éŠ­ã‚’é€ã‚‹éš›ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚¢ãƒ€ãƒ«ãƒˆãƒ•ãƒ©ã‚°ã«å¿œã˜ã¦é©åˆ‡ãªæ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’è‡ªå‹•é¸æŠã€‚

```typescript
import React, { useState } from 'react';
import {
  View,
  Text,
  Modal,
  TouchableOpacity,
  TextInput,
  StyleSheet,
} from 'react-native';
import { Ionicons } from '@expo/vector-icons';
import { Colors } from '../constants/Colors';
import { selectPaymentProvider } from '../utils/paymentProvider';
import { sendTip } from '../utils/mockApi';

interface TipModalProps {
  visible: boolean;
  onClose: () => void;
  contentId: string;
  contentType: 'video' | 'short' | 'live';
  contentTitle: string;
  creatorName: string;
  isAdultContent: boolean;
}

export function TipModal({
  visible,
  onClose,
  contentId,
  contentType,
  contentTitle,
  creatorName,
  isAdultContent,
}: TipModalProps) {
  const [amount, setAmount] = useState('');
  const [message, setMessage] = useState('');
  const [loading, setLoading] = useState(false);

  const provider = selectPaymentProvider(isAdultContent);
  const presetAmounts = [100, 500, 1000, 5000];

  const handleSendTip = async () => {
    const tipAmount = parseInt(amount);
    if (isNaN(tipAmount) || tipAmount <= 0) {
      alert('é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
      return;
    }

    setLoading(true);
    try {
      const result = await sendTip(
        contentId,
        contentType,
        tipAmount,
        message
      );

      if (result.success && result.paymentUrl) {
        // æ±ºæ¸ˆç”»é¢ã¸é·ç§»
        // å®Ÿè£…ã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å¿œã˜ã¦å¤‰æ›´
        alert(`æ±ºæ¸ˆç”»é¢ã¸ç§»å‹•ã—ã¾ã™: ${result.paymentUrl}`);
        onClose();
      }
    } catch (error) {
      alert('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
    } finally {
      setLoading(false);
    }
  };

  return (
    <Modal
      visible={visible}
      transparent
      animationType="slide"
      onRequestClose={onClose}
    >
      <View style={styles.modalOverlay}>
        <View style={styles.modalContent}>
          {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
          <View style={styles.modalHeader}>
            <Text style={styles.modalTitle}>æŠ•ã’éŠ­ã‚’é€ã‚‹</Text>
            <TouchableOpacity onPress={onClose}>
              <Ionicons name="close" size={24} color={Colors.text} />
            </TouchableOpacity>
          </View>

          {/* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æƒ…å ± */}
          <View style={styles.contentInfo}>
            <Text style={styles.contentTitle}>{contentTitle}</Text>
            <Text style={styles.creatorName}>by {creatorName}</Text>
          </View>

          {/* ãƒ—ãƒªã‚»ãƒƒãƒˆé‡‘é¡ */}
          <View style={styles.presetAmounts}>
            {presetAmounts.map(preset => (
              <TouchableOpacity
                key={preset}
                style={[
                  styles.presetButton,
                  amount === preset.toString() && styles.presetButtonSelected
                ]}
                onPress={() => setAmount(preset.toString())}
              >
                <Text style={[
                  styles.presetButtonText,
                  amount === preset.toString() && styles.presetButtonTextSelected
                ]}>
                  Â¥{preset.toLocaleString()}
                </Text>
              </TouchableOpacity>
            ))}
          </View>

          {/* ã‚«ã‚¹ã‚¿ãƒ é‡‘é¡å…¥åŠ› */}
          <TextInput
            style={styles.amountInput}
            value={amount}
            onChangeText={setAmount}
            placeholder="ã‚«ã‚¹ã‚¿ãƒ é‡‘é¡ï¼ˆå††ï¼‰"
            keyboardType="number-pad"
            placeholderTextColor={Colors.textSecondary}
          />

          {/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ› */}
          <TextInput
            style={styles.messageInput}
            value={message}
            onChangeText={setMessage}
            placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆä»»æ„ï¼‰"
            multiline
            placeholderTextColor={Colors.textSecondary}
          />

          {/* æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¡¨ç¤º */}
          <View style={styles.providerInfo}>
            <Ionicons name="information-circle" size={16} color={Colors.textSecondary} />
            <Text style={styles.providerText}>
              æ±ºæ¸ˆæ–¹æ³•: {provider.toUpperCase()}
            </Text>
          </View>

          {/* é€ä¿¡ãƒœã‚¿ãƒ³ */}
          <TouchableOpacity
            style={[styles.sendButton, loading && styles.sendButtonDisabled]}
            onPress={handleSendTip}
            disabled={loading}
          >
            <Text style={styles.sendButtonText}>
              {loading ? 'å‡¦ç†ä¸­...' : 'æŠ•ã’éŠ­ã‚’é€ã‚‹'}
            </Text>
          </TouchableOpacity>
        </View>
      </View>
    </Modal>
  );
}

const styles = StyleSheet.create({
  // ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©...
});
```

### Phase 6: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®å®Ÿè£…

#### 6.1 å‹•ç”»ä¸€è¦§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/(tabs)/videos.tsx`

```typescript
import { filterContentByPlan } from '../utils/contentAccess';
import { getCurrentSubscriptionPlan } from '../utils/mockApi';

// useEffectå†…
useEffect(() => {
  const loadVideos = async () => {
    const allVideos = await getVideos();
    const currentPlan = await getCurrentSubscriptionPlan();

    // ãƒ—ãƒ©ãƒ³ã«åŸºã¥ã„ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    const filteredVideos = filterContentByPlan(allVideos, currentPlan);
    setVideos(filteredVideos);
  };

  loadVideos();
}, []);
```

#### 6.2 å‹•ç”»å†ç”Ÿå‰ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚§ãƒƒã‚¯
**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/video/[id].tsx`

```typescript
import { canAccessContent } from '../utils/contentAccess';
import { getCurrentSubscriptionPlan } from '../utils/mockApi';

// å‹•ç”»èª­ã¿è¾¼ã¿æ™‚
useEffect(() => {
  const checkAccess = async () => {
    const videoData = await getVideoDetail(id);
    const currentPlan = await getCurrentSubscriptionPlan();

    const accessCheck = canAccessContent(videoData, currentPlan);

    if (!accessCheck.canAccess) {
      // ã‚¢ã‚¯ã‚»ã‚¹æ¨©ãŒãªã„å ´åˆã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ä¿ƒé€²ç”»é¢ã‚’è¡¨ç¤º
      Alert.alert(
        'ãƒ—ãƒ©ãƒ³ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™',
        accessCheck.reason,
        [
          { text: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', onPress: () => router.back() },
          {
            text: 'ãƒ—ãƒ©ãƒ³ã‚’è¦‹ã‚‹',
            onPress: () => router.push('/(tabs)/settings')
          },
        ]
      );
      return;
    }

    setVideo(videoData);
  };

  checkAccess();
}, [id]);
```

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ä¸€è¦§

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ | å„ªå…ˆåº¦ |
|---------|---------|--------|
| `types/index.ts` | SubscriptionPlanå‹ã®æ‹¡å¼µã€æ–°è¦å‹è¿½åŠ  | é«˜ |
| `utils/mockApi.ts` | ã‚µãƒ–ã‚¹ã‚¯ãƒ—ãƒ©ãƒ³ãƒ»æŠ•ã’éŠ­é–¢é€£APIè¿½åŠ  | é«˜ |
| `app/(tabs)/settings.tsx` | ãƒ—ãƒ©ãƒ³ç®¡ç†UIã®3ãƒ—ãƒ©ãƒ³å¯¾å¿œ | é«˜ |
| `app/(tabs)/videos.tsx` | ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°è¿½åŠ  | ä¸­ |
| `app/(tabs)/shorts.tsx` | ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°è¿½åŠ  | ä¸­ |
| `app/(tabs)/netflix.tsx` | ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°è¿½åŠ  | ä¸­ |
| `app/video/[id].tsx` | ã‚¢ã‚¯ã‚»ã‚¹æ¨©ãƒã‚§ãƒƒã‚¯è¿½åŠ  | é«˜ |

### æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ | å„ªå…ˆåº¦ |
|---------|------|--------|
| `utils/paymentProvider.ts` | æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼é¸æŠãƒ­ã‚¸ãƒƒã‚¯ | é«˜ |
| `utils/contentAccess.ts` | ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãƒ­ã‚¸ãƒƒã‚¯ | é«˜ |
| `components/TipModal.tsx` | æŠ•ã’éŠ­ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ä¸­ |
| `mock/subscription-plans.json` | ã‚µãƒ–ã‚¹ã‚¯ãƒ—ãƒ©ãƒ³ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ | é«˜ |

## ğŸš€ å®Ÿè£…ã®å„ªå…ˆé †ä½

### ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç¤å®Ÿè£…ï¼ˆå¿…é ˆï¼‰
1. âœ… å‹å®šç¾©ã®æ‹¡å¼µï¼ˆ`types/index.ts`ï¼‰
2. âœ… ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆï¼ˆ`mock/subscription-plans.json`ï¼‰
3. âœ… ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®å®Ÿè£…ï¼ˆ`utils/paymentProvider.ts`, `utils/contentAccess.ts`ï¼‰
4. âœ… APIé–¢æ•°ã®å®Ÿè£…ï¼ˆ`utils/mockApi.ts`ï¼‰

### ãƒ•ã‚§ãƒ¼ã‚º2: UIå®Ÿè£…ï¼ˆå¿…é ˆï¼‰
5. âœ… ãƒ—ãƒ©ãƒ³é¸æŠç”»é¢ã®æ”¹ä¿®ï¼ˆ`app/(tabs)/settings.tsx`ï¼‰
6. âœ… ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®å®Ÿè£…ï¼ˆå„ã‚¿ãƒ–ï¼‰
7. âœ… ã‚¢ã‚¯ã‚»ã‚¹æ¨©ãƒã‚§ãƒƒã‚¯ã®å®Ÿè£…ï¼ˆå‹•ç”»å†ç”Ÿç”»é¢ï¼‰

### ãƒ•ã‚§ãƒ¼ã‚º3: æŠ•ã’éŠ­æ©Ÿèƒ½ï¼ˆæ¨å¥¨ï¼‰
8. â­• æŠ•ã’éŠ­ãƒ¢ãƒ¼ãƒ€ãƒ«ã®å®Ÿè£…ï¼ˆ`components/TipModal.tsx`ï¼‰
9. â­• å‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¸ã®æŠ•ã’éŠ­ãƒœã‚¿ãƒ³è¿½åŠ 
10. â­• ãƒ©ã‚¤ãƒ–é…ä¿¡ã¸ã®æŠ•ã’éŠ­æ©Ÿèƒ½è¿½åŠ 

### ãƒ•ã‚§ãƒ¼ã‚º4: æ±ºæ¸ˆçµ±åˆï¼ˆå®Ÿè£…æ™‚ï¼‰
11. ğŸ”² Stripeæ±ºæ¸ˆã®å®Ÿè£…ï¼ˆéã‚¢ãƒ€ãƒ«ãƒˆç”¨ï¼‰
12. ğŸ”² CCBillæ±ºæ¸ˆã®å®Ÿè£…ï¼ˆã‚¢ãƒ€ãƒ«ãƒˆç”¨ï¼‰
13. ğŸ”² æ±ºæ¸ˆå®Œäº†å¾Œã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†

## ğŸ§ª ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### 1. ãƒ—ãƒ©ãƒ³ã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- [ ] ãƒ•ãƒªãƒ¼ãƒ—ãƒ©ãƒ³: ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„éè¡¨ç¤º
- [ ] ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³: ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„éè¡¨ç¤ºã€Netflixè¦–è´å¯èƒ½
- [ ] ãƒ—ãƒ¬ãƒŸã‚¢ãƒ +ãƒ—ãƒ©ãƒ³: ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤º

### 2. æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®é¸æŠ
- [ ] éã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®æŠ•ã’éŠ­ â†’ Stripe
- [ ] ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®æŠ•ã’éŠ­ â†’ CCBill
- [ ] ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ç™»éŒ² â†’ Stripe
- [ ] ãƒ—ãƒ¬ãƒŸã‚¢ãƒ +ãƒ—ãƒ©ãƒ³ç™»éŒ² â†’ CCBill

### 3. ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¶é™
- [ ] iOS: ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„å®Œå…¨éè¡¨ç¤º
- [ ] Android: ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„å®Œå…¨éè¡¨ç¤º
- [ ] Web: ãƒ—ãƒ©ãƒ³ã«å¿œã˜ã¦è¡¨ç¤º/éè¡¨ç¤º

## ğŸ“ æ³¨æ„äº‹é …

### Stripeãƒãƒªã‚·ãƒ¼æº–æ‹ 
- âœ… Stripeã§ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„é–¢é€£ã®æ±ºæ¸ˆã‚’è¡Œã‚ãªã„
- âœ… ãƒ—ãƒ©ãƒ³èª¬æ˜ã§ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ˜ç¤ºçš„ã«è²©å£²å¯¾è±¡ã¨ã—ãªã„
- âœ… ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ã¯ã€Œãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½ã€ã¨ã—ã¦è²©å£²

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“
- ãƒ—ãƒ©ãƒ³å¤‰æ›´æ™‚ã«æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®é•ã„ã‚’æ˜ç¤º
- ã‚¢ã‚¯ã‚»ã‚¹æ¨©ãŒãªã„å ´åˆã€é©åˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ãƒ—ãƒ©ãƒ³ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’ä¿ƒé€²
- iOS/Androidã§ã¯ã‚¢ãƒ€ãƒ«ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å®Œå…¨ã«éè¡¨ç¤º

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å¿…ãšã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’å†ãƒã‚§ãƒƒã‚¯
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã ã‘ã«é ¼ã‚‰ãªã„
- æ±ºæ¸ˆæƒ…å ±ã¯é©åˆ‡ã«æš—å·åŒ–

## ğŸ”„ ä»Šå¾Œã®æ‹¡å¼µ

- [ ] å¹´é–“ãƒ—ãƒ©ãƒ³ã®è¿½åŠ 
- [ ] ãƒ•ã‚¡ãƒŸãƒªãƒ¼ãƒ—ãƒ©ãƒ³ã®æ¤œè¨
- [ ] æŠ•ã’éŠ­ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º
- [ ] ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã®åç›Šè©³ç´°è¡¨ç¤º
- [ ] è¤‡æ•°ã®æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠå¯èƒ½ã«

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Stripe Prohibited Businesses](https://stripe.com/legal/restricted-businesses)
- [CCBill Documentation](https://ccbill.com/doc)
- [Epoch Payment Solutions](https://epoch.com/)

---

**æœ€çµ‚æ›´æ–°**: 2025-10-24
**ä½œæˆè€…**: Claude Code
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Ÿè£…æº–å‚™å®Œäº†
